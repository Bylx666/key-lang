KeyScript

中文名：木语

## 基础类型

```
let i = 0i;                 // Int   (可省略i，代表指针长度有符号整数)
let u = 0u;                 // Uint  (不可省略u，指针长度无符号整数)
let f = 0.0l;               // Float (可省略l，通过"."标识浮点)
let f = 0l;                 // Float (不加"."时不可省略l)
let b = true;               // Bool  (true false)
let str = "test";           // Str   (字符串字面量, 所见即所得)
let str = `\n\rtest"`       // Str   (带转义的字符串, 字面量中有双引号就用这个)
let vec = 2, 5, 6, 8;       // Array (叫作列表，任意类型)
let vec = (2, 4, 6);        // Array (当个语法糖好了)
let vec = (),(1,3),(2,4)    // Array (二维列表)
let vec = 29, 8u, true, 26; // Array
let vec = ["wq",0,"!"](a)   // Array
let vec = [](a)             // Array (空列表)
let vec = ();               // Array (空列表)
let buf = [2,5,8,0];        // Buffer(默认u8，叫作数组)
let buf = 'Genshin{0F20}';  // Buffer(u8 {}内允许空格换行)
let buf = [2, 3.4, 8.0](f64)// Buffer(f64)

```

## array 问题

由于array是由,运算符生成的，如果你传参或列表第一个值是列表的话会被当作初始array，后续的值将推进第一个列表而不是创建列表。

最简单的例子：以下行为是等价的。

`((2,4),5) == (2,4,5)`

解决方法是手动在开头创建列表。

`((),(2,4),5) != ((),(2,4,5))`

不可否认以上写法会在多维列表写在一起，或列表字面量传参时难以分辨，因此你可以穿插使用`[](a)`

`(), [2,4,5](a), [2,4,5](a)`

另外，列表表达式可以不填右值，此时此逗号将不会推进新右值。

`(1,2,,,,)==(1,2)`

你也可以用尾随逗号为单元素生成列表

`(1,)==[1](a)`

## 注释
```
// 单行注释
/`
多行注释
多行注释
`/
```
多行注释的结尾``/`省略的话就可以自动注释到文件结尾。

## 字符串扩展语法

```
let a = `\n\r\t\0\\`;
let a = `first:1;\
         second:2;` // 在一行上紧连着
let a = `this is \{some_var};` // 捕获变量
```

## 比较

```
a == 5;
a >= 5
```

## iife

变量污染还挺烦的，所以我准备了这个

let a = !{
  let a = 2;
  let b = 1;
  return a + b;
};

## 定义类型

let a = Type::new();
let a = Type::new();

## 未初始化

let a;
let a = uninit;

上述两行代码等价。

## 泛型

特殊类型Any可以作为函数的参数类型，代表**不检查**其类型。

Any不是关键词，但你不能在let表达式中使用Any。同时定义Any类型时不会报错，但不会生效。

你可以像js的参数用法一样，在使用Any参数时使用其实际属性或方法，并在未找到对应函数或属性时抛出异常。

你可以使用key关键词为Any指定别名，用来告诉编程者Any所期望的类型。我建议使用@前缀作为Any泛型的别名。


## keys
key关键词将一个标识符替换到另一标识符(变量或者类型都可以)

## match
```
match a {
  a {}
  b {}
  ? {}
}
```

## 粗暴的分号省略

如果你是初学者，赋值和调用函数的语句请你不要省略分号，这是非常坏毛病。

我的编译器实现中，`let a = 0 let b = a print(b)`这样的单行写法是可以过编译的，而且会被解析成1行内的3个语句。但为了代码的美观，减少歧义，请你使用分号加换行来为你的代码明确的表现出一个语句的存在。